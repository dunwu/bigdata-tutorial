(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{468:function(t,a,e){"use strict";e.r(a);var s=e(20),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"hive-运维"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hive-运维"}},[t._v("#")]),t._v(" Hive 运维")]),t._v(" "),e("h2",{attrs:{id:"一、hive-安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、hive-安装"}},[t._v("#")]),t._v(" 一、Hive 安装")]),t._v(" "),e("h3",{attrs:{id:"下载并解压"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载并解压"}},[t._v("#")]),t._v(" 下载并解压")]),t._v(" "),e("p",[t._v("下载所需版本的 Hive，这里我下载版本为 "),e("code",[t._v("cdh5.15.2")]),t._v("。下载地址："),e("a",{attrs:{href:"http://archive.cloudera.com/cdh5/cdh/5/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://archive.cloudera.com/cdh5/cdh/5/"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# 下载后进行解压\n tar -zxvf hive-1.1.0-cdh5.15.2.tar.gz\n")])])]),e("h3",{attrs:{id:"配置环境变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置环境变量"}},[t._v("#")]),t._v(" 配置环境变量")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# vim /etc/profile\n")])])]),e("p",[t._v("添加环境变量：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("export HIVE_HOME=/usr/app/hive-1.1.0-cdh5.15.2\nexport PATH=$HIVE_HOME/bin:$PATH\n")])])]),e("p",[t._v("使得配置的环境变量立即生效：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# source /etc/profile\n")])])]),e("h3",{attrs:{id:"修改配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改配置"}},[t._v("#")]),t._v(" 修改配置")]),t._v(" "),e("p",[e("strong",[t._v("1. hive-env.sh")])]),t._v(" "),e("p",[t._v("进入安装目录下的 "),e("code",[t._v("conf/")]),t._v(" 目录，拷贝 Hive 的环境配置模板 "),e("code",[t._v("flume-env.sh.template")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("cp hive-env.sh.template hive-env.sh\n")])])]),e("p",[t._v("修改 "),e("code",[t._v("hive-env.sh")]),t._v("，指定 Hadoop 的安装路径：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("HADOOP_HOME=/usr/app/hadoop-2.6.0-cdh5.15.2\n")])])]),e("p",[e("strong",[t._v("2. hive-site.xml")])]),t._v(" "),e("p",[t._v("新建 hive-site.xml 文件，内容如下，主要是配置存放元数据的 MySQL 的地址、驱动、用户名和密码等信息：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('<?xml version="1.0"?>\n<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>\n\n<configuration>\n  <property>\n    <name>javax.jdo.option.ConnectionURL</name>\n    <value>jdbc:mysql://hadoop001:3306/hadoop_hive?createDatabaseIfNotExist=true</value>\n  </property>\n\n  <property>\n    <name>javax.jdo.option.ConnectionDriverName</name>\n    <value>com.mysql.jdbc.Driver</value>\n  </property>\n\n  <property>\n    <name>javax.jdo.option.ConnectionUserName</name>\n    <value>root</value>\n  </property>\n\n  <property>\n    <name>javax.jdo.option.ConnectionPassword</name>\n    <value>root</value>\n  </property>\n\n</configuration>\n')])])]),e("h3",{attrs:{id:"拷贝数据库驱动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#拷贝数据库驱动"}},[t._v("#")]),t._v(" 拷贝数据库驱动")]),t._v(" "),e("p",[t._v("将 MySQL 驱动包拷贝到 Hive 安装目录的 "),e("code",[t._v("lib")]),t._v(" 目录下, MySQL 驱动的下载地址为："),e("a",{attrs:{href:"https://dev.mysql.com/downloads/connector/j/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://dev.mysql.com/downloads/connector/j/"),e("OutboundLink")],1),t._v("。")]),t._v(" "),e("h3",{attrs:{id:"初始化元数据库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始化元数据库"}},[t._v("#")]),t._v(" 初始化元数据库")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("当使用的 hive 是 1.x 版本时，可以不进行初始化操作，Hive 会在第一次启动的时候会自动进行初始化，但不会生成所有的元数据信息表，只会初始化必要的一部分，在之后的使用中用到其余表时会自动创建；")])]),t._v(" "),e("li",[e("p",[t._v("当使用的 hive 是 2.x 版本时，必须手动初始化元数据库。初始化命令：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# schematool 命令在安装目录的 bin 目录下，由于上面已经配置过环境变量，在任意位置执行即可\nschematool -dbType mysql -initSchema\n")])])])])]),t._v(" "),e("p",[t._v("这里我使用的是 CDH 的 "),e("code",[t._v("hive-1.1.0-cdh5.15.2.tar.gz")]),t._v("，对应 "),e("code",[t._v("Hive 1.1.0")]),t._v(" 版本，可以跳过这一步。")]),t._v(" "),e("h3",{attrs:{id:"启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[t._v("#")]),t._v(" 启动")]),t._v(" "),e("p",[t._v("由于已经将 Hive 的 bin 目录配置到环境变量，直接使用以下命令启动，成功进入交互式命令行后执行 "),e("code",[t._v("show databases")]),t._v(" 命令，无异常则代表搭建成功。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# hive\n")])])]),e("p",[e("img",{attrs:{src:"https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-install-2.png",alt:"img"}})]),t._v(" "),e("p",[t._v("在 Mysql 中也能看到 Hive 创建的库和存放元数据信息的表")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-mysql-tables.png",alt:"img"}})]),t._v(" "),e("h2",{attrs:{id:"二、hiveserver2-beeline"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、hiveserver2-beeline"}},[t._v("#")]),t._v(" 二、HiveServer2/beeline")]),t._v(" "),e("p",[t._v("Hive 内置了 HiveServer 和 HiveServer2 服务，两者都允许客户端使用多种编程语言进行连接，但是 HiveServer 不能处理多个客户端的并发请求，因此产生了 HiveServer2。")]),t._v(" "),e("p",[t._v("HiveServer2（HS2）允许远程客户端可以使用各种编程语言向 Hive 提交请求并检索结果，支持多客户端并发访问和身份验证。HS2 是由多个服务组成的单个进程，其包括基于 Thrift 的 Hive 服务（TCP 或 HTTP）和用于 Web UI 的 Jetty Web 服务。")]),t._v(" "),e("p",[t._v("HiveServer2 拥有自己的 CLI 工具——Beeline。Beeline 是一个基于 SQLLine 的 JDBC 客户端。由于目前 HiveServer2 是 Hive 开发维护的重点，所以官方更加推荐使用 Beeline 而不是 Hive CLI。以下主要讲解 Beeline 的配置方式。")]),t._v(" "),e("h3",{attrs:{id:"修改-hadoop-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改-hadoop-配置"}},[t._v("#")]),t._v(" 修改 Hadoop 配置")]),t._v(" "),e("p",[t._v("修改 hadoop 集群的 core-site.xml 配置文件，增加如下配置，指定 hadoop 的 root 用户可以代理本机上所有的用户。")]),t._v(" "),e("div",{staticClass:"language-xml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("hadoop.proxyuser.root.hosts"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("*"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("hadoop.proxyuser.root.groups"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("*"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("p",[t._v("之所以要配置这一步，是因为 hadoop 2.0 以后引入了安全伪装机制，使得 hadoop 不允许上层系统（如 hive）直接将实际用户传递到 hadoop 层，而应该将实际用户传递给一个超级代理，由该代理在 hadoop 上执行操作，以避免任意客户端随意操作 hadoop。如果不配置这一步，在之后的连接中可能会抛出 "),e("code",[t._v("AuthorizationException")]),t._v(" 异常。")]),t._v(" "),e("blockquote",[e("p",[t._v("关于 Hadoop 的用户代理机制，可以参考："),e("a",{attrs:{href:"https://blog.csdn.net/u012948976/article/details/49904675#%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E8%A7%A3%E8%AF%BB",target:"_blank",rel:"noopener noreferrer"}},[t._v("hadoop 的用户代理机制"),e("OutboundLink")],1),t._v(" 或 "),e("a",{attrs:{href:"http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/Superusers.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Superusers Acting On Behalf Of Other Users"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"启动-hiveserver2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动-hiveserver2"}},[t._v("#")]),t._v(" 启动 hiveserver2")]),t._v(" "),e("p",[t._v("由于上面已经配置过环境变量，这里直接启动即可：")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nohup hiveserver2 &")]),t._v("\n")])])]),e("h3",{attrs:{id:"使用-beeline"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-beeline"}},[t._v("#")]),t._v(" 使用 beeline")]),t._v(" "),e("p",[t._v("可以使用以下命令进入 beeline 交互式命令行，出现 "),e("code",[t._v("Connected")]),t._v(" 则代表连接成功。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("beeline -u jdbc:hive2://hadoop001:10000 -n root\n")])])]),e("h3",{attrs:{id:"beeline-选项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#beeline-选项"}},[t._v("#")]),t._v(" Beeline 选项")]),t._v(" "),e("p",[t._v("Beeline 拥有更多可使用参数，可以使用 "),e("code",[t._v("beeline --help")]),t._v(" 查看，完整参数如下：")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("Usage: java org.apache.hive.cli.beeline.BeeLine\n   -u "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("database url"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("               the JDBC URL to connect to\n   -r                              reconnect to last saved connect url "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in conjunction with "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("save"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   -n "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("username"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("                   the username to connect as\n   -p "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("password"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("                   the password to connect as\n   -d "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("driver class"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("               the driver class to use\n   -i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("init file"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("                  script "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" initialization\n   -e "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("query"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("                      query that should be executed\n   -f "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("exec file"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("                  script "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" that should be executed\n   -w "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("or"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" --password-file "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("password file"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("  the password "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" to "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("read")]),t._v(" password from\n   --hiveconf "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("property")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value       Use value "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" given property\n   --hivevar "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value            hive variable name and value\n                                   This is Hive specific settings "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("which")]),t._v(" variables\n                                   can be "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" at session level and referenced "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Hive\n                                   commands or queries.\n   --property-file"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property-file"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" the "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" to "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("read")]),t._v(" connection properties "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url, driver, user, password"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" from\n   --color"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("true/false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("            control whether color is used "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" display\n   --showHeader"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("true/false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("       show "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("column")]),t._v(" names "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" query results\n   --headerInterval"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ROWS"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("          the interval between "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("which")]),t._v(" heades are displayed\n   --fastConnect"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("true/false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("      skip building table/column list "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" tab-completion\n   --autoCommit"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("true/false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("       enable/disable automatic transaction commit\n   --verbose"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("true/false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("          show verbose error messages and debug info\n   --showWarnings"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("true/false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("     display connection warnings\n   --showNestedErrs"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("true/false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("   display nested errors\n   --numberFormat"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pattern"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("        "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),t._v(" numbers using DecimalFormat pattern\n   --force"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("true/false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("            "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("continue")]),t._v(" running script even after errors\n   --maxWidth"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("MAXWIDTH             the maximum width of the terminal\n   --maxColumnWidth"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("MAXCOLWIDTH    the maximum width to use when displaying columns\n   --silent"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("true/false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("           be "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("more")]),t._v(" silent\n   --autosave"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("true/false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("         automatically save preferences\n   --outputformat"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("table/vertical/csv2/tsv2/dsv/csv/tsv"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),t._v(" mode "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" result display\n   --incrementalBufferRows"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("NUMROWS the number of rows to buffer when printing rows on stdout,\n                                   defaults to "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" only applicable "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" --incremental"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n                                   and --outputformat"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("table\n   --truncateTable"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("true/false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("    truncate table "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("column")]),t._v(" when it exceeds length\n   --delimiterForDSV"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("DELIMITER     specify the delimiter "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" delimiter-separated values output "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default: "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   --isolation"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("LEVEL               "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" the transaction isolation level\n   --nullemptystring"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("true/false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" to "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" to get historic behavior of printing null as empty string\n   --maxHistoryRows"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("MAXHISTORYROWS The maximum number of rows to store beeline history.\n   --convertBinaryArrayToString"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("true/false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("    display binary "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("column")]),t._v(" data as string or as byte array\n   --help                          display this message\n")])])]),e("h3",{attrs:{id:"常用参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用参数"}},[t._v("#")]),t._v(" 常用参数")]),t._v(" "),e("p",[t._v("在 Hive CLI 中支持的参数，Beeline 都支持，常用的参数如下。更多参数说明可以参见官方文档 "),e("a",{attrs:{href:"https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-Beeline%E2%80%93NewCommandLineShell",target:"_blank",rel:"noopener noreferrer"}},[t._v("Beeline Command Options"),e("OutboundLink")],1)]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("参数")]),t._v(" "),e("th",[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("-u")])]),t._v(" "),e("td",[t._v("数据库地址")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("-n")])]),t._v(" "),e("td",[t._v("用户名")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("-p")])]),t._v(" "),e("td",[t._v("密码")])]),t._v(" "),e("tr",[e("td",[t._v("-d")]),t._v(" "),e("td",[t._v("驱动 (可选)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("-e")]),t._v("*")]),t._v(" "),e("td",[t._v("执行 SQL 命令")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("-f")]),t._v("*")]),t._v(" "),e("td",[t._v("执行 SQL 脚本")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("-i (or)--init")])]),t._v(" "),e("td",[t._v("在进入交互模式之前运行初始化脚本")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("--property-file")])]),t._v(" "),e("td",[t._v("指定配置文件")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("--hiveconf property=value")])]),t._v(" "),e("td",[t._v("指定配置属性")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("--hivevar name=value")])]),t._v(" "),e("td",[t._v("用户自定义属性，在会话级别有效")])])])]),t._v(" "),e("p",[t._v("示例： 使用用户名和密码连接 Hive")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("beeline -u jdbc:hive2://localhost:10000  -n username -p password\n")])])]),e("h2",{attrs:{id:"三、hive-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、hive-命令"}},[t._v("#")]),t._v(" 三、Hive 命令")]),t._v(" "),e("h3",{attrs:{id:"help"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#help"}},[t._v("#")]),t._v(" Help")]),t._v(" "),e("p",[t._v("使用 "),e("code",[t._v("hive -H")]),t._v(" 或者 "),e("code",[t._v("hive --help")]),t._v(" 命令可以查看所有命令的帮助，显示如下：")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("usage: hive\n -d,--define "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("          Variable subsitution to apply to hive\n                                  commands. e.g. -d "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("A")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("B or --define "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("A")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("B  --定义用户自定义变量\n    --database "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("databasename"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("     Specify the database to use  -- 指定使用的数据库\n -e "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("quoted-query-string"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("         SQL from "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" line   -- 执行指定的 SQL\n -f "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("filename"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("                    SQL from files   --执行 SQL 脚本\n -H,--help                        Print "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" information  -- 打印帮助信息\n    --hiveconf "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("   Use value "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" given property    --自定义配置\n    --hivevar "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("         Variable subsitution to apply to hive  --自定义变量\n                                  commands. e.g. --hivevar "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("A")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("B\n -i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("filename"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("                    Initialization SQL "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("  --在进入交互模式之前运行初始化脚本\n -S,--silent                      Silent mode "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" interactive shell    --静默模式\n -v,--verbose                     Verbose mode "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("echo executed SQL to the  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  --详细模式\n")])])]),e("h3",{attrs:{id:"交互式命令行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#交互式命令行"}},[t._v("#")]),t._v(" 交互式命令行")]),t._v(" "),e("p",[t._v("直接使用 "),e("code",[t._v("Hive")]),t._v(" 命令，不加任何参数，即可进入交互式命令行。")]),t._v(" "),e("h3",{attrs:{id:"执行-sql-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#执行-sql-命令"}},[t._v("#")]),t._v(" 执行 SQL 命令")]),t._v(" "),e("p",[t._v("在不进入交互式命令行的情况下，可以使用 "),e("code",[t._v("hive -e")]),t._v("执行 SQL 命令。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("hive -e "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'select * from emp'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[e("a",{attrs:{href:"https://github.com/heibaiying/BigData-Notes/blob/master/pictures/hive-e.png",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-e.png",alt:"img"}}),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"执行-sql-脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#执行-sql-脚本"}},[t._v("#")]),t._v(" 执行 SQL 脚本")]),t._v(" "),e("p",[t._v("用于执行的 sql 脚本可以在本地文件系统，也可以在 HDFS 上。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 本地文件系统")]),t._v("\nhive -f /usr/file/simple.sql"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HDFS文件系统")]),t._v("\nhive -f hdfs://hadoop001:8020/tmp/simple.sql"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("其中 "),e("code",[t._v("simple.sql")]),t._v(" 内容如下：")]),t._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" emp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"配置-hive-变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-hive-变量"}},[t._v("#")]),t._v(" 配置 Hive 变量")]),t._v(" "),e("p",[t._v("可以使用 "),e("code",[t._v("--hiveconf")]),t._v(" 设置 Hive 运行时的变量。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("hive -e "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'select * from emp'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--hiveconf hive.exec.scratchdir"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/tmp/hive_scratch  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n--hiveconf mapred.reduce.tasks"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("blockquote",[e("p",[t._v("hive.exec.scratchdir：指定 HDFS 上目录位置，用于存储不同 map/reduce 阶段的执行计划和这些阶段的中间输出结果。")])]),t._v(" "),e("h3",{attrs:{id:"配置文件启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置文件启动"}},[t._v("#")]),t._v(" 配置文件启动")]),t._v(" "),e("p",[t._v("使用 "),e("code",[t._v("-i")]),t._v(" 可以在进入交互模式之前运行初始化脚本，相当于指定配置文件启动。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("hive -i /usr/file/hive-init.conf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("其中 "),e("code",[t._v("hive-init.conf")]),t._v(" 的内容如下：")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" hive.exec.mode.local.auto "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("blockquote",[e("p",[t._v("hive.exec.mode.local.auto 默认值为 false，这里设置为 true ，代表开启本地模式。")])]),t._v(" "),e("h3",{attrs:{id:"用户自定义变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用户自定义变量"}},[t._v("#")]),t._v(" 用户自定义变量")]),t._v(" "),e("p",[e("code",[t._v("--define")]),t._v("和 "),e("code",[t._v("--hivevar")]),t._v("在功能上是等价的，都是用来实现自定义变量，这里给出一个示例:")]),t._v(" "),e("p",[t._v("定义变量：")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("hive  --define  "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("n")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ename --hiveconf  --hivevar "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("j")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("job"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("在查询中引用自定义变量：")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以下两条语句等价")]),t._v("\nhive "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${n}")]),t._v(" from emp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nhive "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${hivevar"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("n}")]),t._v(" from emp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以下两条语句等价")]),t._v("\nhive "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${j}")]),t._v(" from emp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nhive "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${hivevar"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("j}")]),t._v(" from emp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("结果如下：")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/heibaiying/BigData-Notes/blob/master/pictures/hive-n-j.png",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://github.com/heibaiying/BigData-Notes/raw/master/pictures/hive-n-j.png",alt:"img"}}),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"四、hive-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、hive-配置"}},[t._v("#")]),t._v(" 四、Hive 配置")]),t._v(" "),e("p",[t._v("可以通过三种方式对 Hive 的相关属性进行配置，分别介绍如下：")]),t._v(" "),e("h3",{attrs:{id:"配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[t._v("#")]),t._v(" 配置文件")]),t._v(" "),e("p",[t._v("方式一为使用配置文件，使用配置文件指定的配置是永久有效的。Hive 有以下三个可选的配置文件：")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("hive-site.xml")]),t._v(" - Hive 的主要配置文件；")]),t._v(" "),e("li",[e("code",[t._v("hivemetastore-site.xml")]),t._v(" - 关于元数据的配置；")]),t._v(" "),e("li",[e("code",[t._v("hiveserver2-site.xml")]),t._v(" - 关于 HiveServer2 的配置。")])]),t._v(" "),e("p",[t._v("示例如下,在 hive-site.xml 配置 "),e("code",[t._v("hive.exec.scratchdir")]),t._v("：")]),t._v(" "),e("div",{staticClass:"language-xml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("hive.exec.scratchdir"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("/tmp/mydir"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Scratch space for Hive jobs"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("h3",{attrs:{id:"hiveconf"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hiveconf"}},[t._v("#")]),t._v(" hiveconf")]),t._v(" "),e("p",[t._v("方式二为在启动命令行 (Hive CLI / Beeline) 的时候使用 "),e("code",[t._v("--hiveconf")]),t._v(" 指定配置，这种方式指定的配置作用于整个 Session。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("hive --hiveconf hive.exec.scratchdir"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/tmp/mydir\n")])])]),e("h3",{attrs:{id:"set"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#set"}},[t._v("#")]),t._v(" set")]),t._v(" "),e("p",[t._v("方式三为在交互式环境下 (Hive CLI / Beeline)，使用 set 命令指定。这种设置的作用范围也是 Session 级别的，配置对于执行该命令后的所有命令生效。set 兼具设置参数和查看参数的功能。如下：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("0: jdbc:hive2://hadoop001:10000> set hive.exec.scratchdir=/tmp/mydir;\nNo rows affected (0.025 seconds)\n0: jdbc:hive2://hadoop001:10000> set hive.exec.scratchdir;\n+----------------------------------+--+\n|               set                |\n+----------------------------------+--+\n| hive.exec.scratchdir=/tmp/mydir  |\n+----------------------------------+--+\n")])])]),e("h3",{attrs:{id:"配置优先级"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置优先级"}},[t._v("#")]),t._v(" 配置优先级")]),t._v(" "),e("p",[t._v("配置的优先顺序如下 (由低到高)：\n"),e("code",[t._v("hive-site.xml")]),t._v(" - >"),e("code",[t._v("hivemetastore-site.xml")]),t._v("- > "),e("code",[t._v("hiveserver2-site.xml")]),t._v(" - >"),e("code",[t._v("-- hiveconf")]),t._v("- > "),e("code",[t._v("set")])]),t._v(" "),e("h3",{attrs:{id:"配置参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置参数"}},[t._v("#")]),t._v(" 配置参数")]),t._v(" "),e("p",[t._v("Hive 可选的配置参数非常多，在用到时查阅官方文档即可"),e("a",{attrs:{href:"https://cwiki.apache.org/confluence/display/Hive/AdminManual+Configuration",target:"_blank",rel:"noopener noreferrer"}},[t._v("AdminManual Configuration"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"参考资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/heibaiying/BigData-Notes",target:"_blank",rel:"noopener noreferrer"}},[t._v("BigData-Notes"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);